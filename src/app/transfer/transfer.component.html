<h2>Virement de compte à compte</h2>

<form (ngSubmit)="form.value" [formGroup]="form">
  <div class="select-client">
    <mat-form-field style="width:25vw">
      <mat-label>Client du compte débiteur</mat-label>
      <mat-select formControlName="idClientDebitFormControl" (selectionChange)="findAccount($event.value)">
        @for (debitClient of clients; track debitClient) {
          <mat-option name="clientDebitAccount" [value]="debitClient.id">{{ debitClient.id }} : {{ debitClient.personInfos.firstName }}  {{ debitClient.personInfos.lastName }}  </mat-option>
        }
      </mat-select>
    </mat-form-field>
    
    <mat-icon>arrow_forward</mat-icon>
    
    <mat-form-field style="width:25vw">
      <mat-label>Client du compte créditeur</mat-label>
      <mat-select formControlName = "idClientCreditFormControl">
        @for (creditClient of clients; track creditClient) {
          <mat-option name="clientCreditAccount" [value]="creditClient.id">{{ creditClient.id }} : {{ creditClient.personInfos.firstName }}  {{ creditClient.personInfos.lastName }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>
  
  <div class="select-account-type">
    <mat-form-field style="width:25vw">
      <mat-label>Type de compte</mat-label>
      <mat-select formControlName="typeDebitAccountFormControl" (selectionChange)="findAccountType($event.value)" >
        @for (account of accountTypes; track account) {
          <mat-option name="typeDebitAccount" [value]="account">{{ account }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-icon>arrow_forward</mat-icon>

    <mat-form-field style="width:25vw">
      <mat-label>Type de compte</mat-label>
      <mat-select formControlName="typeCreditAccountFormControl" >
        @for (account of accountTypes; track account) {
          <mat-option name="typeCreditAccount" [value]="account">{{ account }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>
  
  <div class="select-account">
    <mat-form-field style="width:25vw">
      <mat-label>Compte débiteur</mat-label>
      <mat-select formControlName="idDebitAccountFormControl">
        @for (account of currentAccounts; track account) {
          <mat-option name="debitAccount" [value]="account.id">{{ account.id }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <div>
    Compte de débit : 
    ID du compte : {{selectedAccount.id}} 
    Montant : {{selectedAccount.balance}} 
  </div>
    
    <mat-icon>arrow_forward</mat-icon>
    
    <mat-form-field style="width:25vw">
      <mat-label>Compte créditeur</mat-label>
      <mat-select formControlName="idCreditAccountFormControl">
        @for (account of currentAccounts; track account) {
          <mat-option name="creditAccount" [value]="account.id">{{ account.id }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>
  
  
  <mat-form-field class="example-full-width" style="width:25vw">
    <mat-label>Montant</mat-label>
    <input matInput name="amount" formControlName="amountFormControl" placeholder="Ex. 2500" value="" />
  </mat-form-field>
  <br>

  <button mat-stroked-button color="primary" (click)="onSubmit(form.value)">Valider</button>
  
</form>