<div class="main-container">
<h2>Virement de compte à compte</h2>

<form (ngSubmit)="form.value" [formGroup]="form">
  <div class = "account-selection-container">
    <div class="left-container">
      <div class="select-client">
        <mat-form-field style="width:25vw">
          <mat-label>Client du compte débiteur</mat-label>
          <mat-select formControlName="idClientDebitFormControl" (selectionChange)="findClientAccounts($event.value)">
            @for (debitClient of clients; track debitClient) {
              <mat-option name="clientDebitAccount" [value]="debitClient.id">{{ debitClient.id }} : {{ debitClient.personInfos.firstName }}  {{ debitClient.personInfos.lastName }}  </mat-option>
            }
          </mat-select> 
        </mat-form-field> 
        <mat-icon>arrow_forward</mat-icon>
      </div>
     
      <div>
        <mat-form-field style="width:25vw">
          <mat-label>Compte débiteur</mat-label>
          <mat-select formControlName="idDebitAccountFormControl" (selectionChange)="findAccount($event.value)" >
            <mat-option name="debitAccount" [value]="debitCurrentAccount.id"> {{ debitCurrentAccount.id }} : Compte courant </mat-option>
            <mat-option name="debitAccount" [value]="debitSavingAccount.id"> {{ debitSavingAccount.id }} : Compte épargne </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-icon>arrow_forward</mat-icon>
      </div>   
    </div>

      
    
    <div class="right-container">
      <div class="select-client">
        <mat-form-field style="width:25vw">
          <mat-label>Client du compte créditeur</mat-label>
          <mat-select formControlName="idClientCreditFormControl" (selectionChange)="findClientAccounts($event.value)">
            @for (creditClient of clients; track creditClient) {
              <mat-option name="clientCreditAccount" [value]="creditClient.id">{{ creditClient.id }} : {{ creditClient.personInfos.firstName }}  {{ creditClient.personInfos.lastName }}  </mat-option>
            }
          </mat-select>
        </mat-form-field>      
      </div>
      
      <div>
        <mat-form-field style="width:25vw">
          <mat-label>Compte débiteur</mat-label>
          <mat-select formControlName="idCreditAccountFormControl" (selectionChange)="findAccount($event.value)" >
            <mat-option name="creditAccount" [value]="creditCurrentAccount.id"> {{ creditCurrentAccount.id }} : Compte courant </mat-option>
            <mat-option name="creditAccount" [value]="creditSavingAccount.id"> {{ creditSavingAccount.id }} : Compte épargne </mat-option>
          </mat-select>
        </mat-form-field>
      </div>    
    </div>
  </div>
  
  
  <mat-form-field class="example-full-width" style="width:25vw">
    <mat-label>Montant</mat-label>
    <input matInput name="amount" formControlName="amountFormControl" placeholder="Ex. 2500" value="" />
  </mat-form-field>
  
  <div class = "account-selected-container">
  <div class="left-container">
    <h3>Compte de débit : {{selectedAccount.id}} </h3> 
    Solde : {{selectedAccount.balance}} 
  </div>
  <div class="right-container">
    <h3>Compte de crédit : {{selectedAccount.id}} </h3> 
    Solde : {{selectedAccount.balance}} 
  </div>
</div>



<button mat-stroked-button color="primary" (click)="onSubmit(form.value)">Valider</button>

</form>
</div>